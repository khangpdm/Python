<!DOCTYPE html>
{% load static %}
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cháº¥m Tráº¯c Nghiá»‡m</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">  
</head>
<body>
    <header id="header">
        <h2>Há»‡ thá»‘ng nháº­n diá»‡n bÃ i thi tráº¯c nghiá»‡m</h2>
        <ul>
            {% if username %}
                <!-- {{username}} - {{role}} -->
                <li id="loginItem">
                    <a href="{% url 'logout' %}">ÄÄƒng xuáº¥t({{username}})</a>
                </li>
            {% else %}
            <li id="loginItem">
                <a href="#" onclick="showLoginForm(event)">ÄÄƒng nháº­p</a>
            </li>  
            {% endif %}      
            <li><a href="#">HÆ°á»›ng dáº«n</a></li>
        </ul>      
    </header>
    
    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}

    {% if role == 'teacher' %}
        <section id="teacherSection" >
            <h2>PHáº¦N ÄIá»€U KHIá»‚N Cá»¦A GIÃO VIÃŠN</h2>
            <ul>
                <li><a href="{% url 'danh_sach_de_thi' %}"><button>Quáº£n lÃ½ Ä‘á» thi</button></a></li>
                <li><a href="{% url 'cau_hoi_list' %}"><button>Quáº£n lÃ½ cÃ¢u há»i</button></a></li>
                <li><a href="{% url 'xem_ket_qua' %}"><button>Xem káº¿t quáº£ há»c sinh</button></a></li>
                <li><a href="#"><button>Xuáº¥t bÃ¡o cÃ¡o</button></a></li>
            </ul>
            <!-- <a href="{% url 'logout' %}">ÄÄƒng xuáº¥t</a> -->
        </section>

        {% elif role == 'student' %}
        <section id="studentSection">
            <h2 class="section-title">THÃ”NG TIN Cá»¦A Há»ŒC SINH</h2>
            <ul class="info-list">
                <li>
                    <button id="submitExamBtn" onclick="submitExam()">Ná»™p bÃ i thi</button>
                    <div id="uploadSection" style="display: none; margin-top: 10px;">
                        <form id="uploadForm" method="POST" enctype="multipart/form-data" action="{% url 'upload_exam' %}">
                            {% csrf_token %}
                            <label for="selected_exam">Chá»n Ä‘á» thi:</label>
                            <select id="selected_exam" name="selected_exam" required>
                                <option value="" disabled selected>-- Vui lÃ²ng chá»n Ä‘á» thi --</option>
                                {% if exams %}
                                    {% for exam in exams %}
                                        <option value="{{ exam.id }}">{{ exam.ten_de}}</option>
                                    {% endfor %}
                                {% else %}
                                    <option disabled>KhÃ´ng cÃ³ Ä‘á» thi nÃ o Ä‘Æ°á»£c tÃ¬m tháº¥y</option>
                                {% endif %}
                            </select>
                            <input type="file" id="examImage" name="exam_file" accept="image/*" required>
                            <button type="submit" id="uploadExamBtn">Táº£i lÃªn bÃ i thi</button>
                        </form>
                    </div>
                </li>
                <li><a href="{% url 'xem_ket_qua' %}"><button>Xem káº¿t quáº£</button></a></li>
            </ul>
        </section>
            <!-- <a href="{% url 'logout' %}">ÄÄƒng xuáº¥t</a> -->
    {% else %}
    <!-- Trang chÆ°a Ä‘Äƒng nháº­p -->
    <div id="showForm">
        <section class="features">
            <h2>Chá»©c nÄƒng chÃ­nh</h2>
            <div class="feature-item">ğŸ“Œ Cháº¥m Ä‘iá»ƒm tá»± Ä‘á»™ng</div>
            <div class="feature-item">ğŸ“Š ÄÃ¡nh giÃ¡ káº¿t quáº£</div>
        </section>

        <section class="statistics">
            <h2>Thá»‘ng kÃª ná»•i báº­t</h2>
            <div class="stat-item">âœ… 1000+ bÃ i thi Ä‘Ã£ cháº¥m</div>
            <div class="stat-item">ğŸ¯ 95% Ä‘á»™ chÃ­nh xÃ¡c</div>
            <div class="stat-item">ğŸ‘¨â€ğŸ« 500+ giÃ¡o viÃªn sá»­ dá»¥ng</div>
        </section>

        <section class="contact">
            <h2>LiÃªn há»‡</h2>
            <p><i class="fa fa-envelope"></i> Email: domdom@gmail.com</p>
            <p><i class="fa fa-phone"></i> Sá»‘ Ä‘iá»‡n thoáº¡i: 0123456789</p>
        </section>

        <footer>
            <p>&copy; 2025 Exam Grading System. All rights reserved.</p>
        </footer>

            <form method="POST" action="{% url 'login' %}" id="loginForm" style="display: none;">
                <div id="login">
                    {% csrf_token %}
                    <h2>ÄÄƒng nháº­p</h2> 
                    <button type="button" class="close" onclick="closeLoginForm()">+</button>                  
                    <input type="text" name="username" placeholder="TÃªn Ä‘Äƒng nháº­p" required autocomplete="username">
                    <input type="password" name="password" placeholder="Máº­t kháº©u" required autocomplete="current-password">
                    <button type="submit" class="btn-login ">ÄÄƒng nháº­p</button>
                </div>
            </form>            
    </div>
    {% endif %}
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
